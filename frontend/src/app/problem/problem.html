
<!-- Bouton pour changer la langue -->
<button (click)="toggleLang()">
  {{ lang === 'fr' ? 'English' : 'Fran√ßais' }}
</button>
<p>{{ t.title }}</p>

<!-- üîç Recherche -->

<input
  type="text"
  [(ngModel)]="searchTerm"
  placeholder="{{ t.searchPlaceholder }}"
  (input)="onSearchChange()"
  style="margin-bottom: 10px; padding: 6px;"
/>
<p> </p>
   <!-- ‚ûï Bouton ajout -->
  <button (click)="showPopup = true" style="margin-top: 15px;">‚ûï {{ t.add }}</button>

<!-- ‚ùå Bouton pour vider -->
  <button
    *ngIf="searchTerm"
    (click)="clearSearch()"
    title="Effacer"
  >
    ‚úñ
  </button>

<h1>{{ t.title }}</h1>

<!-- üìä Tableau -->
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>{{ t.name }}</th>
      <th>{{ t.actions }}</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let problem of filteredProblems()">
      <td>{{ problem.id }}</td>
      <td>{{ problem.name }}</td>
      <td>
        <button (click)="openEditPopup(problem)">‚úè</button>
        <button (click)="askDelete(problem.id!)">üóëÔ∏è</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- üìÑ Pagination -->
<div *ngIf="pageCount > 1" style="margin-top: 10px;">
  <button *ngFor="let p of [].constructor(pageCount); let i = index"
          (click)="goToPage(i)"
          [disabled]="i === currentPage"
          style="margin-right: 5px;">
    {{ i + 1 }}
  </button>
</div>



<!-- ü™ü Pop-up -->
<div *ngIf="showPopup" style="
    position: fixed;
    top: 20%;
    left: 35%;
    width: 30%;
    background: white;
    padding: 20px;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px #999;
    z-index: 1000;
  ">
  <h3>{{ t.addTitle }}</h3>
  <input
    type="text"
    [(ngModel)]="newProblem.name"
    placeholder="{{ t.name }}"
    style="width: 100%; padding: 6px;"
  />
  <div style="margin-top: 10px;">
    <button (click)="addProblem()">‚úÖ {{ t.add }}</button>
    <button (click)="showPopup = false">‚ùå {{ t.cancel }}</button>
  </div>
</div>

<div *ngIf="showPopup" class="popup-overlay"></div>

<!-- Popup probl√®me existe d√©j√† Update-->
<div *ngIf="showAlreadyExistsPopupUpdate" class="popup-box">
  <h3>{{ t.exists }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeAlreadyExistsPopupUpdate()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showAlreadyExistsPopupUpdate" class="popup-overlay"></div>

<!-- Popup probl√®me existe Ajout -->
<div *ngIf="showAlreadyExistsPopup" class="popup-box">
  <h3>{{ t.exists }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeAlreadyExistsPopupAdd()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showAlreadyExistsPopup" class="popup-overlay"></div>




<!-- POPUP DE CONFIRMATION -->
<div
  *ngIf="showPopupSuppression"
  style="
    position: fixed; top: 20%; left: 35%; width: 30%; background: white;
    padding: 20px; border: 1px solid #ccc; box-shadow: 0 0 10px #999;
    z-index: 1000;
  "
>
  <h3>{{ t.confirmDelete }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="confirmDelete()">{{ t.confirm }}</button>
    <button (click)="cancelDelete()">{{ t.cancel }}</button>
  </div>
</div>
<!-- Optionnel, pour griser le fond -->
<div
  *ngIf="showPopupSuppression"
  style="
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.1); z-index: 999;
  "
></div>


<!-- POPUP Champ vide Update-->
<div
  *ngIf="showEmptyFieldPopupUpdate"
  style="
    position: fixed; top: 20%; left: 35%; width: 30%; background: white;
    padding: 20px; border: 1px solid #ccc; box-shadow: 0 0 10px #999;
    z-index: 1000;
  "
>
  <h3>{{ t.emptyField }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeEmptyFieldPopupUpdate()">{{ t.confirm }}</button>
  </div>
</div>

<!-- Popup champ vide Ajout-->
<div *ngIf="showEmptyFieldPopup" class="popup-box">
  <h3>{{ t.emptyField }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeEmptyFieldPopup()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showEmptyFieldPopup" class="popup-overlay"></div>

<!-- Popup succ√®s -->
<div *ngIf="showSuccessPopup" class="popup-box">
  <h3>{{ t.successAdd }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeSuccessPopup()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showSuccessPopup" class="popup-overlay"></div>




<!-- Popup succ√®s modification -->
<div *ngIf="showEditSuccessPopup" class="popup-box">
  <h3>{{ t.successEdit }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeEditSuccessPopup()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showEditSuccessPopup" class="popup-overlay"></div>
<!-- Popup succ√®s suppression -->
<div *ngIf="showDeleteSuccessPopup" class="popup-box">
  <h3>{{ t.successDelete }}</h3>
  <div style="margin-top: 10px;">
    <button (click)="closeDeleteSuccessPopup()">{{ t.confirm }}</button>
  </div>
</div>
<div *ngIf="showDeleteSuccessPopup" class="popup-overlay"></div>


<!-- Popup de Modiffication-->
<div *ngIf="showEditPopup" class="popup-box">
  <h3>{{ t.edit }}</h3>
  <input [(ngModel)]="editedName" placeholder="{{ t.componentName }}" />
  <div>
    <button [disabled]="!editId" (click)="updateProblem(editId!, editedName)">{{ t.save }}</button>
    <button (click)="closeEditPopup()">{{ t.cancel }}</button>
  </div>
</div>
